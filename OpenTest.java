import java.util.Scanner;

public class OpenTest implements Command{
    String path;
    private Scanner scanner = new Scanner(System.in);
    public OpenTest(){
        this.path = newName();
    }

    @Override
    public void execute() {
        System.out.println(path);
    }
    public String checkTXT(String file){
        if(file.endsWith(".txt")){
            return file;
        }else{
            return file+".txt";
        }
    }
    public String newName(){
        System.out.println("Existing files are printed lower\n");
        File.files.stream()
                .filter(file -> file.getPath().startsWith("./tests/"))
                .forEach(System.out::println);
        System.out.println("Please, enter the name of the file you want to open\n" +
                "(you can write either type just filename or with \".txt\")");
        String res = checkTXT(scanner.next());
        if (Command.ifNotAvaliable(res,"./tests/")){
            return res;
        }else{
            System.out.println("Such file does not exist\n");
            newName();
        }
        return null;
    }
}
